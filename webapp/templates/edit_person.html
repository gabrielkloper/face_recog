{% extends "layout.html" %}
{% block content %}
    <h2>Edit Registered Person: {{ person_to_edit.name }}</h2>
    <form method="POST" action="{{ url_for('main.edit_person', person_id=person_to_edit.id) }}" enctype="multipart/form-data">
        {{ form.hidden_tag() }} <!-- CSRF token -->
        <div>
            {{ form.name.label }}<br>
            {{ form.name(size=40) }}<br>
            {% for error in form.name.errors %}<span style="color: red;">[{{ error }}]</span><br>{% endfor %}
        </div>
        <br>
        <div>
            {{ form.person_id_system.label }}<br>
            {{ form.person_id_system(size=40) }}<br>
            {% for error in form.person_id_system.errors %}<span style="color: red;">[{{ error }}]</span><br>{% endfor %}
        </div>
        <br>
        <div>
            <p>Current Photo:</p>
            {% if person_to_edit.photo_path %}
                <img src="{{ url_for('static', filename='uploads/registered_photos/' + person_to_edit.photo_path) }}" alt="Current photo of {{ person_to_edit.name }}" style="max-width: 200px; height: auto; margin-bottom:10px;">
            {% else %}
                <p>No photo currently uploaded.</p>
            {% endif %}
            {{ form.photo.label }}<br>
            {{ form.photo() }}<br>
            {% for error in form.photo.errors %}<span style="color: red;">[{{ error }}]</span><br>{% endfor %}
        </div>
        <br>
        <div>
            {{ form.other_data.label }}<br>
            {{ form.other_data(rows=4, cols=38) }}<br>
            {% for error in form.other_data.errors %}<span style="color: red;">[{{ error }}]</span><br>{% endfor %}
        </div>
        <br>
        <div>
            {{ form.submit() }}
        </div>
    </form>
    <hr>
    <p><a href="{{ url_for('main.manage_faces') }}">Back to Face Management</a></p>
{% endblock %}
